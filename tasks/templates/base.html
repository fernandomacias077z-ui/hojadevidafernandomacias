<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bruno Macias | Portfolio</title>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;700&family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    
    <style>
        :root {
            --dev-blue: #38bdf8;
            --cian: #00cae3;
            --dark-dev: #0f172a;
            --bg-sidebar: #ffffff;
            --bg-sitio: #f8fafc;
            --texto-principal: #1e293b;
            --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* --- CONFIGURACIÓN MODO OSCURO --- */
        body.dark-mode {
            --bg-sitio: #0f172a;
            --bg-sidebar: #1e293b;
            --texto-principal: #f8fafc;
            background-color: var(--bg-sitio) !important;
            color: var(--texto-principal) !important;
        }

        /* Corrección de contrastes en modo oscuro */
        body.dark-mode h1, body.dark-mode h2, body.dark-mode h3, 
        body.dark-mode h4, body.dark-mode h5, body.dark-mode p, 
        body.dark-mode span, body.dark-mode .fw-bold {
            color: #f1f5f9 !important;
        }

        body.dark-mode .sidebar {
            background: var(--bg-sidebar) !important;
            border-right-color: #334155 !important;
        }

        /* --- ESTILOS BASE --- */
        body { 
            background-color: var(--bg-sitio); 
            font-family: 'Inter', sans-serif; 
            color: var(--texto-principal);
            transition: var(--transition-smooth);
        }

        .wrapper { display: flex; flex-direction: column; min-height: 100vh; }

        @media (min-width: 992px) {
            .wrapper { flex-direction: row; }
            .sidebar { 
                width: 320px; height: 100vh; position: fixed; 
                top: 0; left: 0; border-right: 1px solid #e2e8f0; 
                overflow-y: auto; z-index: 1000;
            }
            .main-content { flex: 1; margin-left: 320px; padding: 40px; }
        }

        .sidebar { background: var(--bg-sidebar); padding: 30px 25px; display: flex; flex-direction: column; }
        .profile-box { text-align: center; margin-bottom: 30px; }
        .profile-img { 
            width: 130px; height: 130px; border-radius: 50%; 
            border: 4px solid var(--cian); object-fit: cover; 
            transition: var(--transition-smooth); 
        }

        /* Navegación */
        .nav-link-custom {
            display: flex; align-items: center; padding: 12px 15px;
            color: #475569; text-decoration: none; font-weight: 600;
            border-radius: 12px; margin-bottom: 8px; transition: var(--transition-smooth);
        }
        .nav-link-custom:hover { background: rgba(56, 189, 248, 0.1); color: var(--dev-blue); transform: translateX(5px); }
        .nav-link-custom i { font-size: 1.3rem; margin-right: 15px; color: var(--cian); }

        .btn-garage {
            border: 2px dashed var(--cian); border-radius: 25px;
            color: var(--cian); padding: 12px; text-decoration: none; font-weight: 700;
            display: flex; align-items: center; justify-content: center; gap: 10px;
            margin: 20px 0; font-family: 'Fira Code', monospace; transition: var(--transition-smooth);
        }
        .btn-garage:hover { background: var(--cian); color: white; border-style: solid; }

        .dark-mode-btn {
            cursor: pointer; border: 1px solid #e2e8f0; border-radius: 12px;
            padding: 12px; display: flex; align-items: center; justify-content: center;
            gap: 10px; font-size: 0.9rem; font-weight: 700; transition: all 0.3s ease;
            background: transparent; color: #64748b; margin-top: auto;
        }
        body.dark-mode .dark-mode-btn { border-color: #334155; color: #f8fafc; }

        .hidden-section { display: none !important; }
    </style>
</head>
<body class="{% block body_class %}{% endblock %}">

    <div class="wrapper">
        <aside class="sidebar animate__animated animate__fadeInLeft">
            <div class="profile-box">
                <img src="https://i.postimg.cc/L41m7wwd/perfil.jpg" class="profile-img" alt="Bruno Macias">
                <div class="profile-name fw-bold mt-3 text-uppercase">BRUNO FERNANDO<br>MACIAS MOREIRA</div>
            </div>

            <nav class="nav-list">
                <a href="{% url 'home' %}" class="nav-link-custom"><i class="bi bi-terminal-fill"></i> Inicio</a>
                <a href="{% url 'perfil' %}" class="nav-link-custom" id="nav-perfil"><i class="bi bi-person-badge-fill"></i> Mi Perfil</a>
                <a href="{% url 'experiencia' %}" class="nav-link-custom" id="nav-exp"><i class="bi bi-layers-half"></i> Experiencia</a>
                <a href="{% url 'cursos' %}" class="nav-link-custom" id="nav-cur"><i class="bi bi-patch-check-fill"></i> Cursos</a>
                <a href="{% url 'reconocimientos' %}" class="nav-link-custom" id="nav-rec"><i class="bi bi-award-fill"></i> Reconocimientos</a>
            </nav>

            <a href="{% url 'garage' %}" class="btn-garage" id="nav-gar"><i class="bi bi-gpu-card"></i> Garage Tech</a>

            <button id="theme-toggle" class="dark-mode-btn">
                <i class="bi bi-moon-stars-fill" id="theme-icon"></i>
                <span id="theme-text">MODO OSCURO</span>
            </button>
        </aside>

        <main class="main-content">
            {% block content %}{% endblock %}
        </main>
    </div>

    <script>
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        const themeText = document.getElementById('theme-text');
        const body = document.body;

        if (localStorage.getItem('theme') === 'dark') {
            body.classList.add('dark-mode');
            updateToggleUI(true);
        }

        themeToggle.addEventListener('click', () => {
            const isDark = body.classList.toggle('dark-mode');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            updateToggleUI(isDark);
        });

        function updateToggleUI(isDark) {
            themeIcon.className = isDark ? 'bi bi-sun-fill' : 'bi bi-moon-stars-fill';
            themeText.innerText = isDark ? 'MODO CLARO' : 'MODO OSCURO';
            themeIcon.style.color = isDark ? '#fbbf24' : '#00cae3';
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>